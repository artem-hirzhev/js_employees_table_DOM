{"version":3,"sources":["scripts/main.js"],"names":["thead","document","querySelector","th","querySelectorAll","tbody","tr","rows","officeOptions","pushNotification","title","description","type","notification","body","contains","remove","div","createElement","h2","p","append","className","setAttribute","classList","add","textContent","addEventListener","e","sort","index","target","cellIndex","tagName","getAttribute","coll","i","a","b","children","slice","split","join","length","removeAttribute","selectedRow","closest","form","insertAdjacentHTML","nameInput","positionInput","officeInput","ageInput","salaryInput","button","inputsAll","preventDefault","value","Intl","NumberFormat","format","inputs","previousText","newInput","firstChild","replaceWith","checkInput","isNaN","code"],"mappings":"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","file":"main.9845c6fe.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst thead = document.querySelector('thead');\nconst th = thead.querySelectorAll('th');\nconst tbody = document.querySelector('tbody');\nconst tr = tbody.rows;\n\nconst officeOptions = `\n  <option value=\"Tokyo\">Tokyo</option>\n  <option value=\"Singapore\">Singapore</option>\n  <option value=\"London\">London</option>\n  <option value=\"New York\">New York</option>\n  <option value=\"Edinburgh\">Edinburgh</option>\n  <option value=\"San Francisco\">San Francisco</option>\n`;\n\nconst pushNotification = (title, description, type) => {\n  const notification = document.querySelector('.notification');\n\n  if (document.body.contains(notification)) {\n    notification.remove();\n  }\n\n  const div = document.createElement('div');\n  const h2 = document.createElement('h2');\n  const p = document.createElement('p');\n\n  document.body.append(div);\n  div.append(h2);\n  div.append(p);\n\n  div.className = 'notification';\n  div.setAttribute('data-qa', 'notification');\n  div.classList.add(type);\n  h2.className = 'title';\n  h2.textContent = title;\n  p.textContent = description;\n};\n\n// sorts table\nthead.addEventListener('click', e => {\n  let sort;\n  const index = e.target.cellIndex;\n\n  if (e.target.tagName !== 'TH') {\n    return;\n  }\n\n  if (e.target.getAttribute('data-sorted') === 'ASC') {\n    // sort in DESC order\n    switch (e.target.textContent) {\n      case 'Age':\n        sort = function(coll, i) {\n          return [...coll].sort((a, b) =>\n            +b.children[i].textContent - +a.children[i].textContent);\n        };\n        break;\n\n      case 'Salary':\n        sort = function(coll, i) {\n          return [...coll].sort((a, b) =>\n            +b.children[i].textContent.slice(1).split(',').join('')\n              - +a.children[i].textContent.slice(1).split(',').join('')\n          );\n        };\n        break;\n\n      default:\n        sort = function(coll, i) {\n          return [...coll].sort((a, b) =>\n            b.children[i].textContent < a.children[i].textContent ? -1 : 1);\n        };\n    }\n\n    for (let i = 0; i < th.length; i++) {\n      th[i].removeAttribute('data-sorted');\n    }\n\n    e.target.setAttribute('data-sorted', 'DESC');\n  } else {\n    // sort in ASC order\n    switch (e.target.textContent) {\n      case 'Age':\n        sort = function(coll, i) {\n          return [...coll].sort((a, b) =>\n            +a.children[i].textContent - +b.children[i].textContent);\n        };\n        break;\n\n      case 'Salary':\n        sort = function(coll, i) {\n          return [...coll].sort((a, b) =>\n            +a.children[i].textContent.slice(1).split(',').join('')\n              - +b.children[i].textContent.slice(1).split(',').join('')\n          );\n        };\n        break;\n\n      default:\n        sort = function(coll, i) {\n          return [...coll].sort((a, b) =>\n            a.children[i].textContent < b.children[i].textContent ? -1 : 1);\n        };\n    }\n\n    for (let i = 0; i < th.length; i++) {\n      th[i].removeAttribute('data-sorted');\n    }\n\n    e.target.setAttribute('data-sorted', 'ASC');\n  }\n\n  tbody.append(...sort(tr, index));\n});\n\n// selects row\ntbody.addEventListener('click', e => {\n  const selectedRow = e.target.closest('tr');\n\n  for (let i = 0; i < tr.length; i++) {\n    tr[i].classList.remove('active');\n  }\n\n  selectedRow.classList.add('active');\n});\n\n// form for adding employees\nconst form = document.createElement('form');\n\ndocument.body.append(form);\nform.classList.add('new-employee-form');\n\nform.insertAdjacentHTML('afterbegin', `\n  <label>Name:\n    <input\n      id=\"name\"\n      data-qa=\"name\"\n      name=\"name\"\n      type=\"text\"\n      required\n    >\n  </label>\n\n  <label>Position:\n    <input\n      id=\"position\"\n      data-qa=\"position\"\n      name=\"position\"\n      type=\"text\"\n      required\n    >\n  </label>\n\n  <label>Office:\n    <select\n      id=\"office\"\n      data-qa=\"office\"\n      name=\"office\"\n      required\n    >\n      ${officeOptions}\n    </select>\n  </label>\n\n  <label>Age:\n    <input\n      id=\"age\"\n      data-qa=\"age\"\n      name=\"age\"\n      type=\"number\"\n      required\n    >\n  </label>\n\n  <label>Salary:\n    <input\n      id=\"salary\"\n      data-qa=\"salary\"\n      name=\"salary\"\n      type=\"number\"\n      required\n    >\n  </label>\n\n  <button>Save to table</button>\n`);\n\nconst nameInput = form.querySelector('#name');\nconst positionInput = form.querySelector('#position');\nconst officeInput = form.querySelector('#office');\nconst ageInput = form.querySelector('#age');\nconst salaryInput = form.querySelector('#salary');\nconst button = form.querySelector('button');\nconst inputsAll = form.querySelectorAll('input');\n\nbutton.addEventListener('click', e => {\n  e.preventDefault();\n\n  for (let i = 0; i < inputsAll.length; i++) {\n    if (!inputsAll[i].value) {\n      pushNotification(\n        'Erorr',\n        'All fields should be signed with correct values',\n        'error'\n      );\n\n      return;\n    }\n  }\n\n  if (nameInput.value.length < 4) {\n    pushNotification(\n      'Erorr',\n      'Name should be longer than 4 letters',\n      'error'\n    );\n\n    return;\n  }\n\n  if (ageInput.value < 18 || ageInput.value > 90) {\n    pushNotification(\n      'Erorr',\n      'Age should be more than 18 and less than 90',\n      'error'\n    );\n\n    return;\n  }\n\n  tbody.insertAdjacentHTML('beforeend', `\n    <tr>\n      <td>${nameInput.value}</td>\n      <td>${positionInput.value}</td>\n      <td>${officeInput.value}</td>\n      <td>${ageInput.value}</td>\n      <td>$${Intl.NumberFormat('en-US').format(salaryInput.value)}</td>\n    </tr>\n  `);\n\n  nameInput.value = null;\n  positionInput.value = null;\n  ageInput.value = null;\n  salaryInput.value = null;\n\n  pushNotification(\n    'Success',\n    'Employee has been added',\n    'success'\n  );\n});\n\n// cell edititing on double click\ntbody.addEventListener('dblclick', e => {\n  if (e.target.tagName !== 'TD') {\n    return;\n  }\n\n  const inputs = tbody.querySelectorAll('.cell-input');\n\n  if (inputs.length >= 1) {\n    return;\n  }\n\n  const previousText = e.target.textContent;\n  const newInput = e.target.cellIndex === 2\n    ? document.createElement('select')\n    : document.createElement('input');\n\n  if (newInput.tagName === 'SELECT') {\n    newInput.insertAdjacentHTML('afterbegin', officeOptions);\n  }\n\n  newInput.value = previousText;\n  newInput.classList.add('cell-input');\n\n  e.target.firstChild.replaceWith(newInput);\n\n  const checkInput = function() {\n    if (e.target.cellIndex === 0 || e.target.cellIndex === 1) {\n      if (newInput.value.length < 4) {\n        newInput.replaceWith(previousText);\n\n        pushNotification(\n          'Erorr',\n          'Should be longer than 4 letters',\n          'error'\n        );\n\n        return;\n      }\n\n      if (!isNaN(newInput.value)) {\n        newInput.replaceWith(previousText);\n\n        pushNotification(\n          'Erorr',\n          `Shouldn't be number`,\n          'error'\n        );\n\n        return;\n      }\n    }\n\n    if (e.target.cellIndex === 3) {\n      if (isNaN(newInput.value)) {\n        newInput.replaceWith(previousText);\n\n        pushNotification(\n          'Erorr',\n          'Should be number',\n          'error'\n        );\n\n        return;\n      }\n\n      if (newInput.value < 18 || newInput.value > 90) {\n        newInput.replaceWith(previousText);\n\n        pushNotification(\n          'Erorr',\n          'Age should be more than 18 and less than 90',\n          'error'\n        );\n\n        return;\n      }\n    }\n\n    if (e.target.cellIndex === 4) {\n      if (isNaN(newInput.value)) {\n        newInput.replaceWith(previousText);\n\n        pushNotification(\n          'Erorr',\n          'Should be number',\n          'error'\n        );\n\n        return;\n      }\n\n      newInput.replaceWith(\n        `$${Intl.NumberFormat('en-US').format(newInput.value)}`\n      );\n    }\n\n    newInput.replaceWith(newInput.value);\n  };\n\n  // eslint-disable-next-line no-shadow\n  newInput.addEventListener('blur', e => {\n    checkInput();\n  }, true);\n\n  // eslint-disable-next-line no-shadow\n  newInput.addEventListener('keydown', e => {\n    if (e.code === 'Enter') {\n      checkInput();\n    }\n  });\n});\n"]}